<!DOCTYPE html>
<meta charset="utf-8">
<style>
    body {
        font: 10px sans-serif;
    }

    svg text{
        fill:grey;
        font-size:11px;
    }
    svg .values text{
        pointer-events:none;
        stroke-width: 0.5px;
    }
    .groups:hover{
        cursor:pointer;
        font-weight:bold;
    }
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://vizjs.org/viz.v1.1.0.min.js"></script>
<script>

    var data = [['北京','天津',153]
        ,['北京','呼和浩特',0]
        ,['北京','大连',3]
        ,['北京','哈尔滨',2]
        ,['北京','上海',38]
        ,['北京','南京',52]
        ,['北京','杭州',15]
        ,['北京','合肥',15]
        ,['北京','厦门',3]
        ,['北京','青岛',14]
        ,['北京','郑州',54]
        ,['北京','武汉',30]
        ,['北京','广州',5]
        ,['北京','深圳',2]
        ,['北京','石家庄',84]
        ,['北京','重庆',2]
        ,['北京','成都',3]
        ,['北京','贵阳',4]
        ,['北京','西安',16]
        ,['天津','北京',153]
        ,['天津','呼和浩特',0]
        ,['天津','大连',7]
        ,['天津','哈尔滨',9]
        ,['天津','上海',21]
        ,['天津','南京',29]
        ,['天津','杭州',8]
        ,['天津','合肥',9]
        ,['天津','厦门',1]
        ,['天津','青岛',12]
        ,['天津','郑州',15]
        ,['天津','武汉',8]
        ,['天津','广州',1]
        ,['天津','深圳',0]
        ,['天津','石家庄',26]
        ,['天津','重庆',1]
        ,['天津','成都',3]
        ,['天津','贵阳',0]
        ,['天津','西安',5]
        ,['呼和浩特','北京',0]
        ,['呼和浩特','天津',0]
        ,['呼和浩特','大连',0]
        ,['呼和浩特','哈尔滨',0]
        ,['呼和浩特','上海',0]
        ,['呼和浩特','南京',0]
        ,['呼和浩特','杭州',0]
        ,['呼和浩特','合肥',0]
        ,['呼和浩特','厦门',0]
        ,['呼和浩特','青岛',0]
        ,['呼和浩特','郑州',0]
        ,['呼和浩特','武汉',0]
        ,['呼和浩特','广州',0]
        ,['呼和浩特','深圳',0]
        ,['呼和浩特','石家庄',0]
        ,['呼和浩特','重庆',0]
        ,['呼和浩特','成都',0]
        ,['呼和浩特','贵阳',0]
        ,['呼和浩特','西安',0]
        ,['大连','北京',3]
        ,['大连','天津',7]
        ,['大连','呼和浩特',0]
        ,['大连','哈尔滨',16]
        ,['大连','上海',1]
        ,['大连','南京',1]
        ,['大连','杭州',0]
        ,['大连','合肥',0]
        ,['大连','厦门',0]
        ,['大连','青岛',0]
        ,['大连','郑州',2]
        ,['大连','武汉',1]
        ,['大连','广州',0]
        ,['大连','深圳',0]
        ,['大连','石家庄',2]
        ,['大连','重庆',0]
        ,['大连','成都',0]
        ,['大连','贵阳',0]
        ,['大连','西安',1]
        ,['哈尔滨','北京',2]
        ,['哈尔滨','天津',9]
        ,['哈尔滨','呼和浩特',0]
        ,['哈尔滨','大连',16]
        ,['哈尔滨','上海',1]
        ,['哈尔滨','南京',1]
        ,['哈尔滨','杭州',0]
        ,['哈尔滨','合肥',0]
        ,['哈尔滨','厦门',0]
        ,['哈尔滨','青岛',2]
        ,['哈尔滨','郑州',2]
        ,['哈尔滨','武汉',1]
        ,['哈尔滨','广州',0]
        ,['哈尔滨','深圳',0]
        ,['哈尔滨','石家庄',3]
        ,['哈尔滨','重庆',0]
        ,['哈尔滨','成都',0]
        ,['哈尔滨','贵阳',0]
        ,['哈尔滨','西安',0]
        ,['上海','北京',38]
        ,['上海','天津',21]
        ,['上海','呼和浩特',0]
        ,['上海','大连',1]
        ,['上海','哈尔滨',1]
        ,['上海','南京',187]
        ,['上海','杭州',112]
        ,['上海','合肥',31]
        ,['上海','厦门',5]
        ,['上海','青岛',4]
        ,['上海','郑州',20]
        ,['上海','武汉',9]
        ,['上海','广州',4]
        ,['上海','深圳',1]
        ,['上海','石家庄',4]
        ,['上海','重庆',3]
        ,['上海','成都',1]
        ,['上海','贵阳',8]
        ,['上海','西安',9]
        ,['南京','北京',52]
        ,['南京','天津',29]
        ,['南京','呼和浩特',0]
        ,['南京','大连',1]
        ,['南京','哈尔滨',1]
        ,['南京','上海',187]
        ,['南京','杭州',94]
        ,['南京','合肥',51]
        ,['南京','厦门',3]
        ,['南京','青岛',6]
        ,['南京','郑州',27]
        ,['南京','武汉',16]
        ,['南京','广州',2]
        ,['南京','深圳',0]
        ,['南京','石家庄',5]
        ,['南京','重庆',1]
        ,['南京','成都',2]
        ,['南京','贵阳',4]
        ,['南京','西安',14]
        ,['杭州','北京',15]
        ,['杭州','天津',8]
        ,['杭州','呼和浩特',0]
        ,['杭州','大连',0]
        ,['杭州','哈尔滨',0]
        ,['杭州','上海',112]
        ,['杭州','南京',94]
        ,['杭州','合肥',23]
        ,['杭州','厦门',9]
        ,['杭州','青岛',2]
        ,['杭州','郑州',9]
        ,['杭州','武汉',3]
        ,['杭州','广州',5]
        ,['杭州','深圳',1]
        ,['杭州','石家庄',1]
        ,['杭州','重庆',2]
        ,['杭州','成都',0]
        ,['杭州','贵阳',15]
        ,['杭州','西安',4]
        ,['合肥','北京',15]
        ,['合肥','天津',9]
        ,['合肥','呼和浩特',0]
        ,['合肥','大连',0]
        ,['合肥','哈尔滨',0]
        ,['合肥','上海',31]
        ,['合肥','南京',51]
        ,['合肥','杭州',23]
        ,['合肥','厦门',7]
        ,['合肥','青岛',2]
        ,['合肥','郑州',3]
        ,['合肥','武汉',19]
        ,['合肥','广州',4]
        ,['合肥','深圳',1]
        ,['合肥','石家庄',0]
        ,['合肥','重庆',0]
        ,['合肥','成都',0]
        ,['合肥','贵阳',0]
        ,['合肥','西安',2]
        ,['厦门','北京',3]
        ,['厦门','天津',1]
        ,['厦门','呼和浩特',0]
        ,['厦门','大连',0]
        ,['厦门','哈尔滨',0]
        ,['厦门','上海',5]
        ,['厦门','南京',3]
        ,['厦门','杭州',9]
        ,['厦门','合肥',7]
        ,['厦门','青岛',1]
        ,['厦门','郑州',1]
        ,['厦门','武汉',1]
        ,['厦门','广州',1]
        ,['厦门','深圳',6]
        ,['厦门','石家庄',0]
        ,['厦门','重庆',0]
        ,['厦门','成都',0]
        ,['厦门','贵阳',2]
        ,['厦门','西安',0]
        ,['青岛','北京',14]
        ,['青岛','天津',12]
        ,['青岛','呼和浩特',0]
        ,['青岛','大连',0]
        ,['青岛','哈尔滨',2]
        ,['青岛','上海',4]
        ,['青岛','南京',6]
        ,['青岛','杭州',2]
        ,['青岛','合肥',2]
        ,['青岛','厦门',1]
        ,['青岛','郑州',8]
        ,['青岛','武汉',4]
        ,['青岛','广州',1]
        ,['青岛','深圳',0]
        ,['青岛','石家庄',1]
        ,['青岛','重庆',2]
        ,['青岛','成都',1]
        ,['青岛','贵阳',0]
        ,['青岛','西安',2]
        ,['郑州','北京',54]
        ,['郑州','天津',15]
        ,['郑州','呼和浩特',0]
        ,['郑州','大连',2]
        ,['郑州','哈尔滨',2]
        ,['郑州','上海',20]
        ,['郑州','南京',27]
        ,['郑州','杭州',9]
        ,['郑州','合肥',3]
        ,['郑州','厦门',1]
        ,['郑州','青岛',8]
        ,['郑州','武汉',79]
        ,['郑州','广州',25]
        ,['郑州','深圳',10]
        ,['郑州','石家庄',76]
        ,['郑州','重庆',8]
        ,['郑州','成都',16]
        ,['郑州','贵阳',8]
        ,['郑州','西安',67]
        ,['武汉','北京',30]
        ,['武汉','天津',8]
        ,['武汉','呼和浩特',0]
        ,['武汉','大连',1]
        ,['武汉','哈尔滨',1]
        ,['武汉','上海',9]
        ,['武汉','南京',16]
        ,['武汉','杭州',3]
        ,['武汉','合肥',19]
        ,['武汉','厦门',1]
        ,['武汉','青岛',4]
        ,['武汉','郑州',79]
        ,['武汉','广州',60]
        ,['武汉','深圳',25]
        ,['武汉','石家庄',42]
        ,['武汉','重庆',3]
        ,['武汉','成都',0]
        ,['武汉','贵阳',10]
        ,['武汉','西安',14]
        ,['广州','北京',5]
        ,['广州','天津',1]
        ,['广州','呼和浩特',0]
        ,['广州','大连',0]
        ,['广州','哈尔滨',0]
        ,['广州','上海',4]
        ,['广州','南京',2]
        ,['广州','杭州',5]
        ,['广州','合肥',4]
        ,['广州','厦门',1]
        ,['广州','青岛',1]
        ,['广州','郑州',25]
        ,['广州','武汉',60]
        ,['广州','深圳',197]
        ,['广州','石家庄',8]
        ,['广州','重庆',1]
        ,['广州','成都',0]
        ,['广州','贵阳',5]
        ,['广州','西安',8]
        ,['深圳','北京',2]
        ,['深圳','天津',0]
        ,['深圳','呼和浩特',0]
        ,['深圳','大连',0]
        ,['深圳','哈尔滨',0]
        ,['深圳','上海',1]
        ,['深圳','南京',0]
        ,['深圳','杭州',1]
        ,['深圳','合肥',1]
        ,['深圳','厦门',6]
        ,['深圳','青岛',0]
        ,['深圳','郑州',10]
        ,['深圳','武汉',25]
        ,['深圳','广州',197]
        ,['深圳','石家庄',3]
        ,['深圳','重庆',1]
        ,['深圳','成都',0]
        ,['深圳','贵阳',4]
        ,['深圳','西安',4]
        ,['石家庄','北京',84]
        ,['石家庄','天津',26]
        ,['石家庄','呼和浩特',0]
        ,['石家庄','大连',2]
        ,['石家庄','哈尔滨',3]
        ,['石家庄','上海',4]
        ,['石家庄','南京',5]
        ,['石家庄','杭州',1]
        ,['石家庄','合肥',0]
        ,['石家庄','厦门',0]
        ,['石家庄','青岛',1]
        ,['石家庄','郑州',76]
        ,['石家庄','武汉',42]
        ,['石家庄','广州',8]
        ,['石家庄','深圳',3]
        ,['石家庄','重庆',3]
        ,['石家庄','成都',6]
        ,['石家庄','贵阳',4]
        ,['石家庄','西安',21]
        ,['重庆','北京',2]
        ,['重庆','天津',1]
        ,['重庆','呼和浩特',0]
        ,['重庆','大连',0]
        ,['重庆','哈尔滨',0]
        ,['重庆','上海',3]
        ,['重庆','南京',1]
        ,['重庆','杭州',2]
        ,['重庆','合肥',0]
        ,['重庆','厦门',0]
        ,['重庆','青岛',2]
        ,['重庆','郑州',8]
        ,['重庆','武汉',3]
        ,['重庆','广州',1]
        ,['重庆','深圳',1]
        ,['重庆','石家庄',3]
        ,['重庆','成都',49]
        ,['重庆','贵阳',21]
        ,['重庆','西安',8]
        ,['成都','北京',3]
        ,['成都','天津',3]
        ,['成都','呼和浩特',0]
        ,['成都','大连',0]
        ,['成都','哈尔滨',0]
        ,['成都','上海',1]
        ,['成都','南京',2]
        ,['成都','杭州',0]
        ,['成都','合肥',0]
        ,['成都','厦门',0]
        ,['成都','青岛',1]
        ,['成都','郑州',16]
        ,['成都','武汉',0]
        ,['成都','广州',0]
        ,['成都','深圳',0]
        ,['成都','石家庄',6]
        ,['成都','重庆',49]
        ,['成都','贵阳',10]
        ,['成都','西安',17]
        ,['贵阳','北京',4]
        ,['贵阳','天津',0]
        ,['贵阳','呼和浩特',0]
        ,['贵阳','大连',0]
        ,['贵阳','哈尔滨',0]
        ,['贵阳','上海',8]
        ,['贵阳','南京',4]
        ,['贵阳','杭州',15]
        ,['贵阳','合肥',0]
        ,['贵阳','厦门',2]
        ,['贵阳','青岛',0]
        ,['贵阳','郑州',8]
        ,['贵阳','武汉',10]
        ,['贵阳','广州',5]
        ,['贵阳','深圳',4]
        ,['贵阳','石家庄',4]
        ,['贵阳','重庆',21]
        ,['贵阳','成都',10]
        ,['贵阳','西安',1]
        ,['西安','北京',16]
        ,['西安','天津',5]
        ,['西安','呼和浩特',0]
        ,['西安','大连',1]
        ,['西安','哈尔滨',0]
        ,['西安','上海',9]
        ,['西安','南京',14]
        ,['西安','杭州',4]
        ,['西安','合肥',2]
        ,['西安','厦门',0]
        ,['西安','青岛',2]
        ,['西安','郑州',67]
        ,['西安','武汉',14]
        ,['西安','广州',8]
        ,['西安','深圳',4]
        ,['西安','石家庄',21]
        ,['西安','重庆',8]
        ,['西安','成都',17]
        ,['西安','贵阳',1]
    ];

    var colors = {
        "北京":         "#da4480"
        ,"天津":    "#5ab449"
        ,"呼和浩特":    "#7f5acd"
        ,"大连":        "#aab740"
        ,"哈尔滨": "#ce58c0"
        ,"上海":        "#50a26e"
        ,"南京": "#d1434b"
        ,"杭州":      "#45c0bc"
        ,"合肥":"#ce5929"
        ,"厦门": "#4e7bda"
        ,"青岛":  "#d49d3c"
        ,"郑州":   "#6660a3"
        ,"武汉":    "#7b853c"
        ,"广州":     "#b58dde"
        ,"深圳":     "#97622e"
        ,"石家庄":   "#609dd6"
        ,"重庆":      "#e29074"
        ,"成都":        "#9c4b88"
        ,"贵阳":  "#ab505f"
        ,"西安":   "#dc85b6"
    };

    var sortOrder =[
        "北京"
        ,"天津"
        ,"呼和浩特"
        ,"大连"
        ,"哈尔滨"
        ,"上海"
        ,"南京"
        ,"杭州"
        ,"合肥"
        ,"厦门"
        ,"青岛"
        ,"郑州"
        ,"武汉"
        ,"广州"
        ,"深圳"
        ,"石家庄"
        ,"重庆"
        ,"成都"
        ,"贵阳"
        ,"西安"
    ];

    function sort(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)); }

    var ch = viz.ch().data(data)
        .padding(.01)
        .sort(sort)
        .innerRadius(430/2)
        .outerRadius(450/2)
        .duration(1000)
        .chordOpacity(0.3)
        .labelPadding(.03)
        .fill(function(d){ return colors[d];});

    var width=600, height=550;

    var svg = d3.select("body").append("svg").attr("height",height).attr("width",width);

    svg.append("g").attr("transform", "translate(300,275)").call(ch);

    // adjust height of frame in bl.ocks.org
    d3.select(self.frameElement).style("height", height+"px").style("width", width+"px");
</script>